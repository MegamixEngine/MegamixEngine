<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprTwinShooterG</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>prtMiniBoss</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Creation code (all optional):
// image_xscale = 1 or -1 //(Use editor for this!!) determines starting direction of mini boss.

event_inherited();
respawn = true;
introSprite = sprTwinShooterGTeleport;
healthpointsStart = 20;
healthpoints = healthpointsStart;
contactDamage = 5;
blockCollision = 0;
grav = 0;
category = "cannons, floating";

image_speed = 0;

// Enemy specific code
init = true;
shotsFired = 0;
storeXScale = image_xscale;
setSide = 0;
yMax = 0;
phase = 0;
attackTimer = 0;
attackTimerMax = 8;
bullet = noone;

// creation code variables

// setting up movement pattern:
// first variable in an array position is which direction it moves
// second variable is which gun fires.
// 1 = down, -1 = up
// third variable is how far the boss moves on this phase.
pattern[0, 0] = 1;
pattern[0, 1] = 1;
pattern[0, 2] = 32;
pattern[1, 0] = 1;
pattern[1, 1] = 1;
pattern[1, 2] = 48;
pattern[2, 0] = -1;
pattern[2, 1] = -1;
pattern[2, 2] = 48;
pattern[3, 0] = 1;
pattern[3, 1] = -1;
pattern[3, 2] = 32;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();
if (entityCanStep()
    &amp;&amp; introTimer &lt;= 0)
{
    if (init)
    {
        init = false;
        for (var i = 32; i &lt; view_hview; i += 1)
        {
            if (place_meeting(x, y + i, objSolid) || y + i &gt;= (view_yview + view_hview) - 32)
            {
                break;
            }
            else
            {
                yMax = i;
            }
        }
        var hasCol = false;
        for (var i = round(view_wview / 2); i &lt; view_wview; i += 1)
        {
            if (!place_meeting(x + ((16 + i) * image_xscale), y, objSolid))
            {
                hasCol = true;
            }
            if (hasCol &amp;&amp; place_meeting(x + ((16 + i) * image_xscale), y, objSolid) || image_xscale == 1 &amp;&amp; x + i &gt;= (view_xview + view_wview) - 16 || image_xscale == -1 &amp;&amp; x + i &lt;= view_xview + 16)
            {
                break;
            }
            else
            {
                setSide = i;
            }
        }
        mask_index = sprite_index;
    }
    if (storeXScale == 0)
        storeXScale = image_xscale;
    attackTimer++;
    switch (phase)
    {
        case 0:
            image_index = 3;
            if (attackTimer == attackTimerMax)
            {
                phase++;
                attackTimer = 0;
            }
            break;
        case 1:
            if (!instance_exists(objTwinShooterGLaser))
            {
                if (pattern[shotsFired, 1] == 1)
                {
                    image_index = 0 + (floor(attackTimer / 4) mod 2) * 2;
                }
                else
                {
                    image_index = 0 + (floor(attackTimer / 4) mod 2);
                }
                yspeed = 1 * pattern[shotsFired, 0];
                if (attackTimer &gt;= pattern[shotsFired, 2])
                {
                    phase++;
                }
            }
            else
            {
                image_index = 0;
                attackTimer = 0;
            }
            break;
        case 2:
            yspeed = 0;
            var inst = instance_create(x + 8 * image_xscale, y + pattern[shotsFired, 1] * 16, objTwinShooterGLaser);
            inst.expand = image_xscale;
            inst.image_xscale = image_xscale;
            shotsFired++;
            if (shotsFired &gt;= array_height_2d(pattern))
            {
                phase = 9;
                shotsFired = 0;
            }
            else
            {
                attackTimer = 0;
                phase = 1;
            }
            break;
        case 9:
            playSFX(sfxCentaurTeleport);
            phase = 10;
            canHit = false;
            attackTimer = 0;
            break;
        case 10:
            image_index = 4 + attackTimer mod 2;
            if (attackTimer &gt;= 32)
            {
                phase = 11;
            }
            break;
        case 11:
            var aimDir = 1;
            if (image_xscale == -1)
            {
                aimDir = -1;
            }
            if (image_xscale == 1)
            {
                aimDir = 1;
            }
            x = x + setSide * aimDir;
            image_xscale *= -1;
            attackTimer = 0;
            y = ystart;
            mask_index = sprite_index;
            canHit = true;
            phase = 0;
            break;
    }
}
else if (!insideView())
{
    image_index = 0;
    y = ystart;
    x = xstart;
    if (storeXScale != 0)
    {
        image_xscale = storeXScale;
    }
    
    // shootTimer = 0;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="21">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (phase &gt;= 10)
{
    other.guardCancel = 2;
}
else
{
    if (!(bboxGetYCenterObject(other.id) &gt; y - 16) || !(bboxGetYCenterObject(other.id) &lt; y + 16))
    {
        other.guardCancel = 1;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
