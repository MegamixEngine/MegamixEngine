<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprStrikeManSoccerBall</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>prtEntity</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// A soccer ball that flies up when shot, it will damage players and enemies when it falls on them
event_inherited();

// Initialize Entity
canHit = true;
grav = 0;
ground = 1;
blockCollision = 1;
dieToSpikes = 0;
bubbleTimer = -1;
doesTransition = true;
isSolid = 1;
contactDamage = 3;
penetrate = 1;
faction = 7;

// Object specific variables
guardCancel = 0;
sy = y;
descendSpeed = 1.5; // Maximum speed when descending
holdTime = 15;
accelSpeed = -0.35;
ascendSpeed = -2;
accelTime = 15; // in frames
ascendDist = 64;
descendGrav = 0.15; // gravity when descending
acc = 0.1;
phase = 0;
timer = -1;

// Animation
anim = 0;
animTimer = 0;
animFrame = -1;
animSpeed = 0.2;

event_user(1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

/// Step
if (entityCanStep())
{
    // x=xstart;
    var prevAnim = anim;
    healthpoints = 99;
    switch (phase)
    {
        case 0:
            if (timer == -1)
            {
                image_index = 0;
                timer = 0;
                anim = -1;
                grav = 0.25;
            }
            else
                sy = y;
            event_user(0);
            break;
        case 1:
            if (timer == -1)
            {
                anim = 0;
                timer = 0;
                yspeed = -acc;
                animSpeed = 0.25;
                grav = 0;
                playSFX(sfxStrikeManSoccerBall);
            }
            else if (timer == -3)
            {
                anim = 0;
                timer = -2;
                yspeed = ascendSpeed;
                animSpeed = 0.25;
                grav = 0;
                playSFX(sfxStrikeManSoccerBall);
            }
            else
            {
                if (timer &gt;= 0 &amp;&amp; timer &lt;= accelTime &amp;&amp; yspeed &gt;= accelSpeed)
                {
                    timer += 1;
                    yspeed -= acc;
                    if (yspeed &lt; accelSpeed)
                    {
                        yspeed = accelSpeed;
                    }
                    if (timer &gt; accelTime)
                    {
                        timer = -2;
                        yspeed = ascendSpeed;
                    }
                }
                else if (timer == -2)
                {
                    if (y &lt; sy - ascendDist || yspeed == 0)
                    {
                        phase = 2;
                        timer = -1;
                        if (yspeed != 0)
                            y = sy - ascendDist;
                    }
                    else if (abs(y - (sy - ascendDist)) &lt; holdTime)
                    {
                        yspeed += acc;
                        yspeed = min(accelSpeed, yspeed);
                    }
                    else
                        yspeed = ascendSpeed;
                }
            }
            break;
        case 2:
            if (timer == -1)
            {
                anim = 1;
                animSpeed = 0.2;
            }
            event_user(0);
            if (phase == 2 &amp;&amp; ground)
            {
                phase = 0;
                timer = -1;
            }
            
            if (phase == 2)
            {
                yspeed += descendGrav;
            }
            if (yspeed &gt; descendSpeed)
                yspeed = descendSpeed;
            
            break;
    }
    if (prevAnim != anim)
    {
        animFrame = -1;
        animTimer = 2;
    }
    animTimer += animSpeed;
    if (animTimer &gt; 1)
    {
        animTimer = 0;
        animFrame += 1;
        if (animFrame &gt; 1)
        {
            animFrame = 0;
        }
        switch (anim)
        {
            case 0:
                image_index = animFrame + 1;
                break;
            case 1:
                image_index = animFrame + 2;
                break;
            case -1:
                break;
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="25">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

/// spawn
if (spawned)
{
    phase = 0;
    timer = -1;
    anim = -1;
    animSpeed = 0.15;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="21">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();
global.damage = 0;
if (phase == 0)
{
    other.guardCancel = 2;
    if (other.penetrate &lt; 1)
    {
        with (other)
            dead = true;
    }
    phase = 1;
    timer = -1;
}
else
{
    other.guardCancel = 1;
}
healthpoints = healthpointsStart;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="19">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>iFrames = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Prevent Crushing entities when falling
if (!ground &amp;&amp; yspeed &gt; 0)
{
    var changePhase = false;
    
    with (prtEntity)
    {
        if (dead)
            continue;
        var ysp;
        if (yspeed &gt; 1)
            ysp = yspeed;
        else
            ysp = 1;
        var prevGround = ground;
        if (!ground &amp;&amp; (checkSolid(0, 2)))
            ground = true;
        
        if ((!ground &amp;&amp; blockCollision) || (!blockCollision &amp;&amp; isSolid == 0))
            continue;
        var doDamage = false;
        if (((faction == 3 &amp;&amp; isSolid == 0) || faction != 3) &amp;&amp; object_index != objStrikeManSoccerBall &amp;&amp; object_index != objStrikeManSpikeySoccerBall &amp;&amp; object_index != prtEnemyProjectile &amp;&amp; (object_index == objMagnetBeam || object_index == objIceWall || object_index == objRushJet || object_index == objRushCycle || object_index == objRushCoil || faction == 1 || faction == 3) &amp;&amp; place_meeting(x, y - 1 - ysp - other.yspeed, other))
        {
            changePhase = true;
            doDamage = true;
        }
        ground = prevGround;
        if (doDamage)
        {
            global.damage=contactDamage;
            other.guardCancel = 0;
            event_user(11);
            if (other.guardCancel &gt; 0)
                doDamage = false;
        }
        if (canHit &amp;&amp; iFrames == 0 &amp;&amp; doDamage &amp;&amp; penetrate == 0)
        {
            with (other)
                entityEntityCollision();
            hitTimer = 0;
        }
    }
    
    if (changePhase)
    {
        phase = 1;
        timer = -3;
        yspeed = 0;
        animSpeed = 0.25;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
