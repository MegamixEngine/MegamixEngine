<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprStegorus</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>prtEntity</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();
healthpointsStart = 24;
category = "bulky, nature";
contactDamage = 3;
respawnRange = 0;
despawnRange = 16;

// Enemy specific code

//@cc sets how far it moves to the left of its starting position in pixels
leftLimit = 32;

//@cc sets far it moves to the right of its starting position in pixels
rightLimit = 16;

phase = 0;
animFrame = 0;
timer = 0;
shotCount = 0;

//@cc random shenanigans
timescale = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (timescale &lt; 0)
    timescale = abs(timescale);
grav = 0.25 * timescale;
event_inherited();

if (entityCanStep())
{
    switch (phase)
    {
        case 0:
            if (timer == 0) // walk
            {
                var prevFrame = floor(animFrame);
                animFrame += 0.165 * timescale;
                if (floor(animFrame) != prevFrame)
                {
                    if (floor(animFrame) &gt; 1)
                        playSFX(sfxStegorusStomp);
                    if (floor(animFrame) &gt; 4)
                    {
                        animFrame = 0;
                        xspeed = 0;
                        timer = 5 / timescale;
                        screenShake(5, 1, 1);
                        if (x &lt; (xstart - leftLimit) || x &gt; (xstart + rightLimit) || xcoll != 0 || checkFall(65 * image_xscale, true))
                        {
                            var tx = 0;
                            if (instance_exists(target))
                            {
                                tx = target.x;
                            }
                            if (sign(tx - x) == image_xscale)
                            {
                                phase = 1;
                                shotCount = -1;
                                timer = -1;
                            }
                            else
                            {
                                phase = 2;
                                shotCount = -1;
                                timer = 0;
                            }
                            turn = true;
                        }
                    }
                }
                if (floor(animFrame) != 0)
                {
                    xspeed = 0.365 * timescale * image_xscale;
                }
            }
            else
            {
                timer -= 1 * timescale;
                if (timer &lt; 0)
                    timer = 0;
            }
            image_index = floor(animFrame);
            break;
        case 1: // Shoot spikes 
            var prev = floor(animFrame);
            if (timer != -10)
                animFrame += 0.185 * timescale * timer;
            else
            {
                animFrame += 0.175 * timescale;
                if (floor(animFrame) &gt; 6)
                {
                    animFrame = 0;
                    timer = 0;
                    phase = 3 * turn;
                }
            }
            if (timer == 1)
            {
                if (floor(animFrame) != prev &amp;&amp; floor(animFrame) &gt; 2)
                {
                    timer = -1;
                    animFrame = 2.9;
                }
            }
            else if (timer == -1 &amp;&amp; animFrame &lt;= 0)
            {
                timer = 1;
                animFrame = 0;
                shotCount += 1;
                if (shotCount != 3)
                    playSFX(sfxStegorusSpikes);
                switch (shotCount)
                {
                    case 0:
                        var i = instance_create(x + 21 * image_xscale, y - 23, objStegorusSpike);
                        i.sprite_index = sprStegorusSpikeSmall;
                        i.xsp = 2.65;
                        i.image_xscale = image_xscale;
                        i.timescale = timescale;
                        i.parent = id;
                        break;
                    case 1:
                        var i = instance_create(x + 16 * image_xscale, y - 28, objStegorusSpike);
                        i.sprite_index = sprStegorusSpikeMedium;
                        i.xsp = 1.85;
                        i.ysp = -4;
                        i.image_xscale = image_xscale;
                        i.timescale = timescale;
                        i.parent = id;
                        break;
                    case 2:
                        var i = instance_create(x + 10 * image_xscale, y - 34, objStegorusSpike);
                        i.sprite_index = sprStegorusSpikeBig;
                        i.xsp = 1.5;
                        i.ysp = -5;
                        i.image_xscale = image_xscale;
                        i.timescale = timescale;
                        i.parent = id;
                        break;
                    case 3:
                        timer = -10;
                        shotCount = 2;
                        animFrame = 3;
                        break;
                }
            }
            if (phase == 1)
                image_index = floor(animFrame) + 5 + 3 * shotCount;
            else
                image_index = 17;
            break;
        case 2: // Shoot missiles 
            timer += 1 * timescale;
            if (timer &gt;= 30 &amp;&amp; shotCount &lt; 1)
            {
                image_index = 17 + ((ceil(timer) div 10) mod 2);
            }
            else
            {
                image_index = 0;
            }
            if (timer &gt; 40)
            {
                timer = 0;
                shotCount += 1;
                if (shotCount &gt;= 2)
                {
                    phase = turn * 3;
                }
                else
                {
                    var i = instance_create(x + 16 * image_xscale, y - 25, objStegorusMissile);
                    if (image_xscale == 1)
                    {
                        i.angle = 45;
                        i.newAngle = 90;
                    }
                    else
                    {
                        i.angle = 90 + 45;
                        i.newAngle = 90 + 45;
                    }
                    i.parent = id;
                    i.timescale = timescale;
                    playSFX(sfxStegorusMissile);
                }
            }
            break;
        case 3: // turning 
            xspeed = 0;
            var prevFrame = floor(animFrame);
            if (floor(animFrame) != 8)
                animFrame += 0.15 * timescale;
            else
                animFrame += 0.065 * timescale;
            if (floor(animFrame) != prevFrame &amp;&amp; floor(animFrame) == 5)
                image_xscale *= -1;
            image_index = min(10, floor(animFrame)) + 19;
            if (floor(animFrame) &gt; 10)
            {
                animFrame = 0;
                var tx = 0;
                if (instance_exists(target))
                {
                    tx = target.x;
                }
                if (sign(tx - x) == image_xscale)
                {
                    phase = 1;
                    shotCount = -1;
                    timer = -1;
                }
                else
                {
                    phase = 2;
                    shotCount = -1;
                    timer = 0;
                }
                turn = false;
            }
            break;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="25">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();
phase = 0;
animFrame = 0;
timer = 0;
shotCount = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="21">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();
var ignore = true;
if (other.bbox_bottom &gt; bbox_top + 24)
{
    if (collision_rectangle(x + 20 * image_xscale, y - 16, x + 34 * image_xscale, y, other.id, false, true))
    {
        ignore = false;
    }
}
if (ignore)
{
    if (!collision_rectangle(x - 22, y - 30, x + 22, y, other.id, false, true))
    {
        other.guardCancel = 2;
    }
    else
    {
        other.guardCancel = 1;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
